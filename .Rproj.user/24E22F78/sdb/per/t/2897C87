{
    "contents" : "# store #2, station # 14, item nbr 1\nreg <- as.data.table(reg)\n\nhead(te)\ntest <- te[.(2,5)]\n\ntrain <- tr[.(2,5)]\nhead(train)\ntrain[,mean(units)]\n\npredictors <- reg[reg$station_nbr==14,]\n\noptions(digits = 2)\n\ntte <- merge(test, predictors, by = 'date')\nttr <- merge(train, predictors, by= 'date')\n\neventDates <- ttr[eventFlag ==1, date]\neventDates\nlength(eventDates)\nwindow <-  -3:3\nwdw <- data.table(date = sort(unique(eventDates + rep(window, length(eventDates)))))\nwdw\n\nresult <- merge(merge(train, wdw, by='date'), predictors, by='date')\nprint(result, nrow=120)\nresult[,mean(units)]\nresult[, sqrt(mean(log(mean(units)+1) - log(units+1))^2)]\n\n\nlibrary(randomForest)\nind <- complete.cases(result)\ny <- result[ind,units]\nx <- as.matrix(result[ind,6:16, with=F])\nmod_rf <- randomForest(y =y, x=x[,c('tavg','heat','snowInch','preciptotal','snow')])\nmod_rf\nmod_rf$importance\n\nlibrary(glmnet)\nmod_glmnet <- cv.glmnet(x=x, y=y, nfolds=5)\nmod_glmnet$lambda.1se\n\nmod_glmnet2 <- glmnet(x,y, family = 'gaussian', lambda=.4)\nmod_glmnet2\n\npred_glmnet <- predict(mod_glmnet2, x)\npred_rf <- mod_rf$predicted\nplot(pred_rf, pred_glmnet)\n",
    "created" : 1433316827508.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2431396349",
    "id" : "2897C87",
    "lastKnownWriteTime" : 1432242899,
    "path" : "/home/sergey/R_WalMart/forecast_wallmart2.R",
    "project_path" : "forecast_wallmart2.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_source"
}